<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Study Abroad - é˜¿ä¼¯ä¸ç•™å­¦æœåŠ¡å¹³å°</title>
    <link rel="stylesheet" href="./styles/styles.css" />
  </head>
  <body class="dashboard-body">
    <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
    <div class="header-bar">
      <div class="logo-section">
        <div class="logo">A</div>
        <h1 class="header-title">åå—å¸ˆèŒƒå¤§å­¦é˜¿ä¼¯ä¸ æ•°æ®ç§‘å­¦ä¸äººå·¥æ™ºèƒ½å­¦é™¢</h1>
      </div>
      <div class="header-actions">
        <div class="status-indicator">
          <div class="status-dot"></div>
          <span>æ‰€æœ‰ç³»ç»Ÿæ­£å¸¸è¿è¡Œ</span>
        </div>
        <div class="user-info" id="profile-btn">
          <div class="user-avatar" id="user-avatar">U</div>
          <span id="username">ç”¨æˆ·</span>
        </div>
      </div>
    </div>

    <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
    <div class="main-container">
      <div class="welcome-card">
        <h1 class="welcome-title">æ¬¢è¿ä½¿ç”¨ä¼¯ä¸ç•™å­¦æœåŠ¡å¹³å°</h1>
        <p class="welcome-subtitle">é˜¿ä¼¯ä¸å­¦é™¢æ™ºæ…§ç•™å­¦ç®¡ç†å¹³å°</p>
        
        <div class="dashboard-modules-grid">
          <!-- æ•™å¸ˆä¸“å±æ¨¡å—ï¼šå­¦ç”Ÿç®¡ç† -->
          <div class="dashboard-module-card teacher-only" onclick="goToModule('students.html')" style="display: none;">
            <div class="module-icon">ğŸ‘¥</div>
            <div class="module-status status-enabled">å·²å¯ç”¨</div>
            <h3 class="dashboard-module-title">å­¦ç”Ÿä¿¡æ¯ç®¡ç†</h3>
            <p class="dashboard-module-description">æŸ¥çœ‹æ‰€æœ‰å­¦ç”Ÿä¿¡æ¯å’Œä¸Šä¼ çš„æ–‡æ¡£èµ„æ–™</p>
            <div class="module-action">
              <a href="#" class="action-button">â†’ è¿›å…¥ç³»ç»Ÿ</a>
            </div>
          </div>
          
          <div class="dashboard-module-card" onclick="goToModule('chat.html')">
            <div class="module-icon">ğŸ’¬</div>
            <div class="module-status status-enabled">å·²å¯ç”¨</div>
            <h3 class="dashboard-module-title">å¸ˆç”Ÿäº’åŠ¨äº¤æµ</h3>
            <p class="dashboard-module-description">ä¸è€å¸ˆå’ŒåŒå­¦è¿›è¡Œå®æ—¶äº¤æµï¼Œè·å–ç•™å­¦æŒ‡å¯¼å’Œå¸®åŠ©</p>
            <div class="module-action">
              <a href="#" class="action-button">â†’ è¿›å…¥ç³»ç»Ÿ</a>
            </div>
          </div>
          
          <div class="dashboard-module-card" onclick="goToModule('news.html')">
            <div class="module-icon">ğŸ“°</div>
            <div class="module-status status-enabled">å·²å¯ç”¨</div>
            <h3 class="dashboard-module-title">ç•™å­¦ä¿¡æ¯å‘å¸ƒ</h3>
            <p class="dashboard-module-description">æŸ¥çœ‹æœ€æ–°çš„ç•™å­¦æ”¿ç­–ã€ç”³è¯·ä¿¡æ¯å’Œé‡è¦é€šçŸ¥</p>
            <div class="module-action">
              <a href="#" class="action-button">â†’ è¿›å…¥ç³»ç»Ÿ</a>
            </div>
          </div>
          
          <div class="dashboard-module-card" onclick="goToModule('profile.html')">
            <div class="module-icon">ğŸ‘¤</div>
            <div class="module-status status-enabled">å·²å¯ç”¨</div>
            <h3 class="dashboard-module-title">ä¸ªäººèµ„æ–™ç®¡ç†</h3>
            <p class="dashboard-module-description">ç®¡ç†æ‚¨çš„ä¸ªäººä¿¡æ¯ï¼ŒåŒ…æ‹¬å§“åã€å­¦å·ã€å¹´çº§ç­‰</p>
            <div class="module-action">
              <a href="#" class="action-button">â†’ è¿›å…¥ç³»ç»Ÿ</a>
            </div>
          </div>
          
          <div class="dashboard-module-card">
            <div class="module-icon">ğŸ“š</div>
            <div class="module-status status-disabled">æœªå¯ç”¨</div>
            <h3 class="dashboard-module-title">æ–‡æ¡£ç®¡ç†ç³»ç»Ÿ</h3>
            <p class="dashboard-module-description">æ–‡ä»¶ä¸Šä¼ ã€å­˜å‚¨å’Œç®¡ç†ç³»ç»Ÿ</p>
            <div class="module-action">
              <span class="action-button action-disabled">ğŸ”’ è¯¥ç³»ç»Ÿå½“å‰ä¸å¯ç”¨</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- åº•éƒ¨ä¿¡æ¯ -->
    <div class="dashboard-footer">
      <div class="footer-content">
        <div>Â©2025 åå—å¸ˆèŒƒå¤§å­¦é˜¿ä¼¯ä¸æ•°æ®ç§‘å­¦ä¸äººå·¥æ™ºèƒ½å­¦é™¢ ä¿ç•™æ‰€æœ‰æƒåˆ©</div>
        <div class="footer-links">
          <a href="#">å…³äºæˆ‘ä»¬</a>
          <a href="#">ç³»ç»ŸçŠ¶æ€</a>
        </div>
        <div>ç‰ˆæœ¬ 2.1.0-beta.2</div>
      </div>
    </div>
    
    <!-- è­¦å‘Šæ¨ªå¹… -->
    <div class="warning-banner">
      æœ¬å¹³å°ä¸ºè”ç½‘å¹³å°ï¼Œè¯·å‹¿ä¸Šä¼ æ¶‰å¯†æ–‡ä»¶
    </div>

    <!-- å³ä¸Šè§’ä¿¡æ¯é¢æ¿ -->
    <div id="profile-popover" style="display:none; position:fixed; top:80px; right:20px; background:#fff; border:1px solid #eee; box-shadow:0 4px 20px rgba(0,0,0,.08); border-radius:10px; padding:12px; min-width:260px; z-index:1000;">
      <h3 style="margin-top:0;">æˆ‘çš„ä¿¡æ¯</h3>
      <div id="profile-basic">åŠ è½½ä¸­...</div>
      <div style="margin-top:8px; display:flex; gap:8px;">
        <button class="button" onclick="Modules.openProfile(); toggleProfile(false)">ç¼–è¾‘èµ„æ–™</button>
        <button class="button" onclick="Auth.signOut(); location.href='index.html'">é€€å‡ºç™»å½•</button>
      </div>
    </div>

    <script src="./js/api.js"></script>
    <script src="./js/auth.js"></script>
    <script src="./js/dashboard.js"></script>
    <script>
      // æ›´æ–°ç”¨æˆ·ä¿¡æ¯æ˜¾ç¤º
      document.addEventListener('DOMContentLoaded', function() {
        // è·å–ç”¨æˆ·ä¿¡æ¯å¹¶æ›´æ–°æ˜¾ç¤º
        if (typeof Auth !== 'undefined' && Auth.state.user) {
          const user = Auth.state.user;
          const usernameElement = document.getElementById('username');
          const avatarElement = document.getElementById('user-avatar');
          
          if (usernameElement) {
            usernameElement.textContent = user.name || user.username || 'ç”¨æˆ·';
          }
          
          if (avatarElement) {
            const name = user.name || user.username || 'U';
            avatarElement.textContent = name.charAt(0).toUpperCase();
          }
        }
      });
    </script>
  </body>
  </html>
